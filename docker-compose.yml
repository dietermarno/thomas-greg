version: "3.9"  # optional since v1.27.0
services:
  sql:
    container_name: mssql
    image: dietermarno/thomasgregmssql:data
    hostname: mssql
    restart: always
    ports:
      - "1433:1433" 
    environment:
      - ACCEPT_EULA=y
      - SA_PASSWORD=R353t3282@
    networks:
      - dockerhost
  web_api:
    container_name: wepapi
    image: dietermarno/thomasgregcorewebapi:dev
    hostname: wepapi
    ports:
      - "5000:80"
      - "5001:443"
    environment:
      - ASPNETCORE_LOGGING__CONSOLE__DISABLECOLORS=true
      - ASPNETCORE_ENVIRONMENT=Docker
      - ASPNETCORE_URLS=https://+:443;http://+:80
      - ASPNETCORE_HTTPS_PORT=5001
      - DOTNET_USE_POLLING_FILE_WATCHER=1
      - NUGET_PACKAGES=/root/.nuget/fallbackpackages2
      - NUGET_FALLBACK_PACKAGES=/root/.nuget/fallbackpackages;/root/.nuget/fallbackpackages2
    depends_on:
      - sql
    networks:
      - dockerhost
networks:
  dockerhost:
    driver: bridge
    name: thomasgreg
